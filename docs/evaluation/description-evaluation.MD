# Description du Module Evaluation

## Vue d'ensemble

Le module **Evaluation** est le cÅ“ur du systÃ¨me d'Ã©valuation qualitÃ© des appels. Il permet d'analyser, annoter et Ã©valuer les conversations tÃ©lÃ©phoniques selon des grilles qualitÃ© prÃ©dÃ©finies. Ce module suit un workflow structurÃ© en plusieurs phases pour transformer un appel audio brut en Ã©valuation complÃ¨te avec recommandations d'amÃ©lioration.

## Architecture modulaire

### ğŸ¯ Composant principal : `Evaluation.tsx`

- **Interface unifiÃ©e** centralisant tous les sous-modules
- **Gestion d'Ã©tat centralisÃ©e** pour la navigation entre vues
- **SystÃ¨me de panneaux** adaptatif (transcription + contexte)
- **Modes d'affichage** : normal, plein Ã©cran transcription, plein Ã©cran contexte

### ğŸ—ï¸ Structure modulaire

```
evaluation/
â”œâ”€â”€ admin/               # Module d'administration des grilles
â”œâ”€â”€ components/          # Composants du workflow d'Ã©valuation
â”‚   â”œâ”€â”€ EntrainementSuivi/   # Phase 4 - Formation
â”‚   â”œâ”€â”€ FourZones/           # Phase 3 - Coaching
â”‚   â”œâ”€â”€ Postit/              # Phase 2 - Annotation
â”‚   â”œâ”€â”€ SyntheseEvaluation/  # Phase 5 - SynthÃ¨se
â”‚   â””â”€â”€ UnifiedHeader/       # Navigation unifiÃ©e
```

## Workflow d'Ã©valuation en 5 phases

### Phase 1 : SÃ©lection (SelectionEntrepriseEtAppel)

- **SÃ©lection entreprise** et appel Ã  Ã©valuer
- **Chargement transcription** automatique
- **Validation grille qualitÃ©** associÃ©e

### Phase 2 : Annotation (Postit)

- **SystÃ¨me de post-its** sur la transcription
- **Association sujets/pratiques** selon la grille qualitÃ©
- **Navigation par Ã©tapes** : contexte â†’ sujet â†’ pratique â†’ synthÃ¨se
- **Validation automatique** de la complÃ©tude

### Phase 3 : Coaching (FourZones)

- **MÃ©thode 4 zones** pour le coaching :
  - "Vous avez fait" (points positifs)
  - "Je fais" (dÃ©monstration)
  - "L'entreprise fait" (ressources)
  - "Vous ferez" (plan d'action)
- **Studio TTS** pour gÃ©nÃ©rer des audio de formation
- **Ã‰dition collaborative** en temps rÃ©el

### Phase 4 : Formation (EntrainementSuivi)

- **GÃ©nÃ©ration nudges** personnalisÃ©s
- **Planification formation** sur mesure
- **Suivi progression** avec indicateurs
- **Ressources pÃ©dagogiques** (fiches coach/conseiller)

### Phase 5 : SynthÃ¨se (SyntheseEvaluation)

- **Dashboard complet** de l'Ã©valuation
- **Statistiques visuelles** (graphiques, mÃ©triques)
- **Rapports exportables** pour le management
- **CritÃ¨res qualitÃ©** avec scoring automatique

## FonctionnalitÃ©s transversales

### ğŸ§ Gestion Audio

- **Lecteur audio intÃ©grÃ©** avec timeline interactive
- **Synchronisation transcription** mot par mot
- **Marqueurs temporels** pour navigation rapide
- **TTS (Text-to-Speech)** pour formation audio

### ğŸ“ Transcription intelligente

- **Affichage par mots** ou par paragraphes
- **Identification locuteurs** (client/conseiller)
- **SÃ©lection de texte** pour annotation
- **Recherche et navigation** dans le contenu

### ğŸ¤ Collaboration temps rÃ©el

- **Sessions partagÃ©es** pour Ã©valuation collaborative
- **Synchronisation position** audio entre participants
- **Mode spectateur** pour observation
- **Anonymisation** configurable

### ğŸ¨ Interface adaptive

- **Header unifiÃ©** avec navigation contextuelle
- **Panneaux redimensionnables** selon le contexte
- **Modes sombre/clair** avec persistance
- **Responsive design** pour tous Ã©crans

## Module d'administration

### ğŸ¢ Gestion Entreprises

- **CRUD complet** des entreprises clientes
- **Association grilles qualitÃ©** par entreprise
- **Configuration domaines** internet

### ğŸ“Š Grilles QualitÃ©

- **CrÃ©ation grilles** personnalisÃ©es ou templates
- **Gestion catÃ©gories** avec codes couleur
- **PondÃ©ration critÃ¨res** (conforme/non-conforme)
- **Association entreprises** multiples

### ğŸ”„ Traducteur Sujets-Pratiques

- **Mapping intelligent** sujets â†” pratiques
- **Niveaux d'importance** configurables
- **Interface graphique** intuitive
- **Validation cohÃ©rence** automatique

## Types et interfaces

### Types principaux

typescript

```typescript
// Appel avec mÃ©tadonnÃ©es
interfaceCall{
  audiourl:string|null;
  callid:number;
  filename:string;
  description?:string;
  callactivityrelation:CallActivityRelation[];
}

// Post-it d'Ã©valuation
interfacePostit{
  id:number;
  callid:number;
  wordid:number;
  text:string;
  sujet:string;
  pratique:string;
  timestamp:number;
}

// Statistiques d'Ã©valuation
interfaceEvaluationStats{
  totalPostits:number;
  uniqueSujets:number;
  uniquePratiques:number;
}
```

### Architecture Ã©tat

- **State centralisÃ©** avec reducers spÃ©cialisÃ©s
- **Hooks personnalisÃ©s** pour chaque fonctionnalitÃ©
- **Context providers** pour partage donnÃ©es
- **Memoization optimisÃ©e** pour performance

## IntÃ©grations

### ğŸ—ƒï¸ Base de donnÃ©es (Supabase)

- **Tables relationnelles** optimisÃ©es
- **RLS (Row Level Security)** par entreprise
- **Triggers automatiques** pour cohÃ©rence
- **RÃ©plication temps rÃ©el** pour collaboration

### ğŸ¤ Services externes

- **Transcription audio** (API dÃ©diÃ©e)
- **Text-to-Speech** (OpenAI/Azure)
- **Stockage fichiers** (Supabase Storage)
- **Authentification** (Auth0/Supabase Auth)

## Performance et optimisations

### âš¡ Optimisations techniques

- **Lazy loading** des composants lourds
- **Virtualisation** des listes longues
- **Cache intelligent** des transcriptions
- **Debouncing** des sauvegardes automatiques

### ğŸ“ˆ MÃ©triques et monitoring

- **Analytics usage** par fonctionnalitÃ©
- **Performance tracking** temps rÃ©ponse
- **Error boundary** avec reporting
- **Health checks** services externes

---

_Ce module reprÃ©sente le cÅ“ur mÃ©tier de la plateforme, alliant analyse qualitÃ©, formation personnalisÃ©e et collaboration en temps rÃ©el pour amÃ©liorer continuellement les performances des conseillers._
