# Documentation SchÃ©ma Whiteboard - 000-CADO

## Vue d'Ensemble

Le schÃ©ma `whiteboard` constitue le **systÃ¨me de collaboration temps rÃ©el** de 000-CADO avec **8 tables** orchestrant les sessions d'Ã©valuation collaborative synchrone entre coaches et conseillers. Il permet l'Ã©valuation granulaire (mot-par-mot), la synchronisation temps rÃ©el, et la collecte de feedback collaboratif.

### Statistiques GÃ©nÃ©rales

- **8 tables** spÃ©cialisÃ©es collaboration temps rÃ©el
- **6 colonnes UUID** pour identifiants distribuÃ©s
- **1 colonne JSONB** pour configuration flexible
- **3 relations intra-schÃ©ma** + 9 relations cross-schÃ©mas
- **4 sÃ©quences** pour auto-incrÃ©mentation
- **PropriÃ©taire** : postgres (schÃ©ma mÃ©tier custom)

## Architecture du SystÃ¨me Collaboratif

### ðŸŽ¯ **Workflow de Collaboration Temps RÃ©el**

```
Coach lance session â†’ shared_evaluation_sessions (Ã©tat partagÃ©)
            â†“
Participants rejoignent â†’ sessions (tracking participants)
            â†“
Ã‰valuation collaborative â†’ participant_evaluations (granularitÃ© mot-par-mot)
            â†“
Interface synchronisÃ©e â†’ current_view (Ã©tat interface partagÃ©)
            â†“
Annotations visuelles â†’ postits (Ã©lÃ©ments collaboratifs)
            â†“
Feedback collectÃ© â†’ survey_settings â†’ survey_responses
            â†“
Questions dynamiques â†’ whiteboard_question (contenu adaptatif)
```

## Tables par Domaine Fonctionnel

### ðŸŽ® **1. Gestion des Sessions Collaboratives** (2 tables)

#### **Table `shared_evaluation_sessions` - Hub Central des Sessions**

**CÅ“ur du systÃ¨me collaboratif** avec synchronisation fine :

```sql
-- Identifiants et contexte
id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
coach_user_id UUID â†’ auth.users.id (NO ACTION),
call_id INTEGER â†’ public.call.callid (NO ACTION),
session_name VARCHAR(255),

-- Ã‰tat de la session temps rÃ©el
audio_position NUMERIC DEFAULT 0,         -- Position audio synchronisÃ©e
session_mode VARCHAR(20) DEFAULT 'paused', -- 'paused', 'playing', 'reviewing'
is_active BOOLEAN DEFAULT true,

-- Configuration d'affichage collaborative
show_participant_tops BOOLEAN DEFAULT false,  -- Afficher classement participants
show_tops_realtime BOOLEAN DEFAULT false,     -- Mise Ã  jour classement temps rÃ©el
anonymous_mode BOOLEAN DEFAULT true,          -- Mode anonyme pour Ã©valuations

-- Navigation granulaire dans le contenu
view_mode VARCHAR(20) DEFAULT 'word',         -- 'word', 'sentence', 'paragraph'
current_word_index INTEGER DEFAULT 0,         -- Mot actuellement visualisÃ©
current_paragraph_index INTEGER DEFAULT 0,    -- Paragraphe actuellement visualisÃ©

-- PrÃ©fÃ©rences d'affichage
highlight_turn_one BOOLEAN DEFAULT false,     -- Surligner premier tour
highlight_speakers BOOLEAN DEFAULT true,      -- DiffÃ©rencier les interlocuteurs

-- Audit temporel
created_at TIMESTAMP DEFAULT now(),
updated_at TIMESTAMP DEFAULT now()
```

**FonctionnalitÃ©s rÃ©vÃ©lÃ©es** :

- **Synchronisation audio** : Position partagÃ©e entre tous les participants
- **Navigation granulaire** : Mot par mot, phrase par phrase, ou paragraphe
- **Mode anonyme** : Ã‰valuations collaboratives sans rÃ©vÃ©ler l'identitÃ©
- **Affichage adaptatif** : Configuration interface selon prÃ©fÃ©rences

#### **Table `sessions` - Tracking des Participants**

```sql
-- Identification participant
id INTEGER PRIMARY KEY,
idavatar INTEGER â†’ public.avatars.idavatar (CASCADE DELETE),
nom TEXT NOT NULL,
url TEXT NOT NULL,
joined_at TIMESTAMP WITH TIME ZONE DEFAULT now()
```

**Relations CASCADE** :

- Suppression avatar â†’ suppression session (cohÃ©rence donnÃ©es)

### ðŸ“Š **2. Ã‰valuations Collaboratives Granulaires** (1 table)

#### **Table `participant_evaluations` - Ã‰valuations Ultra-PrÃ©cises**

**Innovation majeure** : Ã‰valuation collaborative au niveau du mot

```sql
-- Identifiants collaboratifs
id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
session_id UUID â†’ shared_evaluation_sessions.id (NO ACTION),
participant_session_id INTEGER â†’ sessions.id (NO ACTION),

-- RÃ©fÃ©rencement prÃ©cis du contenu Ã©valuÃ©
call_id INTEGER â†’ public.call.callid (NO ACTION),
audio_timestamp NUMERIC,                    -- Position exacte dans l'audio
transcription_segment TEXT,                 -- Segment de transcription Ã©valuÃ©
word_start_id INTEGER â†’ public.word.wordid (NO ACTION),  -- Mot de dÃ©but
word_end_id INTEGER â†’ public.word.wordid (NO ACTION),    -- Mot de fin

-- Ã‰valuation mÃ©tier
comment TEXT,                              -- Commentaire de l'Ã©valuateur
assigned_sujet_id INTEGER â†’ public.sujets.idsujet (NO ACTION),      -- Contexte mÃ©tier
assigned_pratique_id INTEGER â†’ public.pratiques.idpratique (NO ACTION), -- CompÃ©tence Ã©valuÃ©e

-- Audit
created_at TIMESTAMP DEFAULT now()
```

**ParticularitÃ©s techniques** :

- **GranularitÃ© mot-par-mot** : `word_start_id` et `word_end_id` pour sÃ©lection prÃ©cise
- **Double synchronisation** : Session globale + session participant
- **RÃ©fÃ©rences croisÃ©es** : Call, sujet, pratique pour contexte complet
- **Timestamp audio** : Synchronisation avec lecteur audio partagÃ©

### ðŸŽ¨ **3. Interface Collaborative Visuelle** (2 tables)

#### **Table `postits` - Annotations Visuelles PartagÃ©es**

```sql
-- Contenu et positionnement
content TEXT NOT NULL,                     -- Texte du post-it
x DOUBLE PRECISION DEFAULT 0,             -- Position X sur whiteboard
y DOUBLE PRECISION DEFAULT 0,             -- Position Y sur whiteboard
color TEXT DEFAULT 'yellow',              -- Couleur du post-it

-- Identifiant et audit
id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
created_at TIMESTAMP WITH TIME ZONE DEFAULT now(),
updated_at TIMESTAMP WITH TIME ZONE DEFAULT now()
```

**FonctionnalitÃ©s** :

- **Positionnement libre** : CoordonnÃ©es X,Y sur whiteboard infini
- **Personnalisation visuelle** : Couleurs pour catÃ©gorisation
- **UUID distribuÃ©** : Identifiants uniques pour synchronisation temps rÃ©el

#### **Table `current_view` - Ã‰tat Interface PartagÃ©**

```sql
-- Ã‰tat de l'interface partagÃ©e
id INTEGER PRIMARY KEY,
view_name TEXT NOT NULL,                   -- Vue actuellement active
updated_at TIMESTAMP DEFAULT now()        -- DerniÃ¨re synchronisation
```

**Usage** : Synchronisation de l'Ã©tat d'interface entre participants

### ðŸ“‹ **4. SystÃ¨me de Feedback Collaboratif** (3 tables)

#### **Architecture Feedback Dynamique**

```
survey_settings (configuration) â†’ survey_responses (rÃ©ponses) â† whiteboard_question (questions adaptatives)
```

#### **Table `survey_settings` - Configuration EnquÃªtes**

```sql
-- Questions configurables
id INTEGER PRIMARY KEY,
question_open TEXT NOT NULL,              -- Question ouverte obligatoire
question_closed TEXT,                     -- Question fermÃ©e optionnelle
closed_options JSONB,                     -- Options de rÃ©ponse (structure flexible)

-- Configuration et audit
email TEXT,                               -- Email de configuration
created_at TIMESTAMP DEFAULT now(),
updated_at TIMESTAMP DEFAULT now()
```

**Structure JSONB `closed_options`** :

```json
{
  "type": "multiple_choice",
  "options": [
    { "value": "excellent", "label": "Excellent" },
    { "value": "good", "label": "Bien" },
    { "value": "average", "label": "Moyen" },
    { "value": "poor", "label": "Ã€ amÃ©liorer" }
  ],
  "allow_multiple": false,
  "required": true
}
```

#### **Table `survey_responses` - RÃ©ponses Collaboratives**

```sql
-- Identification rÃ©pondant
id INTEGER PRIMARY KEY,
participant_id UUID â†’ auth.users.id (SET NULL),
survey_id INTEGER â†’ survey_settings.id (CASCADE DELETE),

-- RÃ©ponses structurÃ©es
rating INTEGER,                           -- Note numÃ©rique
feedback TEXT,                           -- Commentaire libre
closed_answer TEXT,                      -- RÃ©ponse question fermÃ©e
email TEXT,                              -- Email rÃ©pondant (optionnel)

-- Audit
created_at TIMESTAMP DEFAULT now()
```

**Relations** :

- **CASCADE DELETE** : Suppression enquÃªte â†’ suppression rÃ©ponses
- **SET NULL** : Suppression utilisateur â†’ prÃ©servation rÃ©ponse anonymisÃ©e

#### **Table `whiteboard_question` - Questions Dynamiques**

```sql
-- Questions gÃ©nÃ©rÃ©es dynamiquement
id INTEGER PRIMARY KEY,
question TEXT NOT NULL                    -- Question adaptÃ©e au contexte
```

**Usage probable** : Questions gÃ©nÃ©rÃ©es par IA selon le contexte de l'Ã©valuation

## Contraintes Business et SÃ©curitÃ©

### ðŸ”’ **Row Level Security (RLS) - SÃ©curitÃ© Collaborative AvancÃ©e**

Le schÃ©ma `whiteboard` implÃ©mente un **systÃ¨me RLS sophistiquÃ©** avec **32 politiques** pour sÃ©curiser la collaboration temps rÃ©el :

#### **Politiques Coach SpÃ©cialisÃ©es**

```sql
-- AccÃ¨s privilÃ©giÃ© coach identifiÃ©
'Allow coach to update view' ON current_view
WHERE auth.email() = 'thomassonear@gmail.com'

-- Gestion complÃ¨te sessions par coach
'users_manage_own_sessions' ON shared_evaluation_sessions
WHERE coach_user_id = auth.uid()

-- Suppression globale sessions (fonction admin)
'Allow coach to delete all sessions' ON sessions
WHERE auth.email() = 'thomassonear@gmail.com'
```

#### **Politiques Participants Collaboratives**

```sql
-- Participants gÃ¨rent leurs propres Ã©valuations
'Participants can submit responses' ON survey_responses
WHERE participant_id = auth.uid()

-- AccÃ¨s lecture Ã  ses propres rÃ©ponses uniquement
'Participants can view their own responses' ON survey_responses
WHERE participant_id = auth.uid()

-- AccÃ¨s sessions actives pour tous participants
'Allow public read access to active sessions' ON shared_evaluation_sessions
WHERE is_active = true
```

#### **Politiques Post-its Collaboratifs**

```sql
-- CRUD complet pour utilisateurs authentifiÃ©s
'Allow authenticated users to insert postits' WHERE auth.uid() IS NOT NULL
'Allow authenticated users to read postits' WHERE auth.uid() IS NOT NULL
'Allow authenticated users to update postits' WHERE auth.uid() IS NOT NULL
'Allow authenticated users to delete postits' WHERE auth.uid() IS NOT NULL

-- + Politiques publiques permissives pour collaboration ouverte
'Allow insert for all users', 'Allow read for all', etc.
```

### âš–ï¸ **Contraintes MÃ©tier**

#### **Contrainte QualitÃ© Feedback**

```sql
-- SystÃ¨me de notation 1-5 obligatoire
survey_responses_rating_check: rating >= 1 AND rating <= 5
```

#### **Contraintes RÃ©fÃ©rentiell Strict**

```sql
-- Champs obligatoires pour cohÃ©rence collaborative
content IS NOT NULL (postits)
x IS NOT NULL, y IS NOT NULL (positionnement postits)
question_open IS NOT NULL (survey_settings)
```

## Optimisations Performance et VolumÃ©trie

### ðŸ“Š **Patterns d'Usage RÃ©vÃ©lÃ©s**

#### **DonnÃ©es Temps RÃ©el (Usage Actuel)**

| Table                          | Lignes | Pattern          | Insight                            |
| ------------------------------ | ------ | ---------------- | ---------------------------------- |
| **shared_evaluation_sessions** | 9      | **BALANCED**     | Sessions actives + historique      |
| **sessions**                   | 5      | **INSERT_HEAVY** | Participants se connectent         |
| **survey_responses**           | 4      | **INSERT_HEAVY** | Feedback collectÃ©                  |
| **current_view**               | 1      | **UPDATE_HEAVY** | Ã‰tat interface synchronisÃ©         |
| **participant_evaluations**    | 0      | **STATIC**       | FonctionnalitÃ© prÃªte, pas utilisÃ©e |

#### **Insights OpÃ©rationnels**

- **Sessions actives** : 9 sessions crÃ©Ã©es, 12 mises Ã  jour (Ã©volution temps rÃ©el)
- **Interface synchronisÃ©e** : `current_view` mise Ã  jour 13 fois (navigation partagÃ©e)
- **Collaboration authentique** : 5 participants, 4 feedbacks (engagement rÃ©el)
- **Potentiel inexploitÃ©** : `participant_evaluations` vide (fonctionnalitÃ© avancÃ©e prÃªte)

### âš¡ **Index SpÃ©cialisÃ©s Performance**

#### **Index Temps RÃ©el OptimisÃ©**

```sql
-- Performance collaboration temps rÃ©el
CREATE INDEX idx_shared_sessions_realtime
ON shared_evaluation_sessions (id, updated_at, is_active);

-- Contrainte mÃ©tier : Un coach = Une session active
CREATE UNIQUE INDEX unique_active_session_per_coach
ON shared_evaluation_sessions (coach_user_id)
WHERE is_active = true;
```

**Optimisations rÃ©vÃ©lÃ©es** :

- **RequÃªtes temps rÃ©el** : Index composÃ© pour synchronisation rapide
- **RÃ¨gle mÃ©tier** : PrÃ©vention sessions multiples simultanÃ©es par coach
- **Performance collaborative** : Index sur UUID + timestamps pour rÃ©activitÃ©

## Relations et IntÃ©grations

### ðŸ”— **Relations Intra-SchÃ©ma** (3 relations)

#### **Workflow de Session**

```sql
-- Participants rejoignent sessions d'Ã©valuation
participant_evaluations.session_id â†’ shared_evaluation_sessions.id (NO ACTION)
participant_evaluations.participant_session_id â†’ sessions.id (NO ACTION)

-- EnquÃªtes et rÃ©ponses liÃ©es
survey_responses.survey_id â†’ survey_settings.id (CASCADE DELETE)
```

### ðŸŒ **Relations Cross-SchÃ©mas** (9 relations)

#### **Vers SchÃ©ma `public` (MÃ©tier Core)** - 7 relations

```sql
-- RÃ©fÃ©rences prÃ©cises au contenu mÃ©tier
participant_evaluations.call_id â†’ public.call.callid (NO ACTION)
participant_evaluations.word_start_id â†’ public.word.wordid (NO ACTION)
participant_evaluations.word_end_id â†’ public.word.wordid (NO ACTION)
participant_evaluations.assigned_sujet_id â†’ public.sujets.idsujet (NO ACTION)
participant_evaluations.assigned_pratique_id â†’ public.pratiques.idpratique (NO ACTION)

-- Gestion sessions et avatars
sessions.idavatar â†’ public.avatars.idavatar (CASCADE DELETE)
shared_evaluation_sessions.call_id â†’ public.call.callid (NO ACTION)
```

#### **Vers SchÃ©ma `auth` (Utilisateurs)** - 2 relations

```sql
-- Identification utilisateurs collaboratifs
shared_evaluation_sessions.coach_user_id â†’ auth.users.id (NO ACTION)
survey_responses.participant_id â†’ auth.users.id (SET NULL)
```

### ðŸ›¡ï¸ **StratÃ©gies de Protection**

#### **NO ACTION (Protection DonnÃ©es MÃ©tier)**

- **PrÃ©servation contenu** : Suppression appel/mot n'affecte pas Ã©valuations collaboratives
- **Historique Ã©valuations** : Sessions prÃ©servÃ©es mÃªme si participants supprimÃ©s
- **IntÃ©gritÃ© rÃ©fÃ©rentielle** : Ã‰valuations restent cohÃ©rentes

#### **CASCADE DELETE (CohÃ©rence Collaborative)**

- **Sessions liÃ©es aux avatars** : Suppression avatar â†’ suppression session
- **EnquÃªtes et rÃ©ponses** : Suppression enquÃªte â†’ suppression rÃ©ponses

#### **SET NULL (Anonymisation)**

- **RGPD compliance** : Suppression utilisateur â†’ anonymisation rÃ©ponses

## Patterns de Collaboration Temps RÃ©el

### ðŸ”„ **Synchronisation Multi-Niveaux**

#### **1. Synchronisation Audio/Contenu**

```sql
-- Position audio partagÃ©e
shared_evaluation_sessions.audio_position NUMERIC DEFAULT 0
shared_evaluation_sessions.current_word_index INTEGER DEFAULT 0

-- Navigation coordonnÃ©e
participant_evaluations.audio_timestamp â†’ synchronisÃ© avec audio_position
participant_evaluations.word_start_id â†’ synchronisÃ© avec current_word_index
```

#### **2. Synchronisation Interface**

```sql
-- Ã‰tat interface partagÃ©
current_view.view_name â†’ vue active synchronisÃ©e
shared_evaluation_sessions.view_mode â†’ 'word', 'sentence', 'paragraph'

-- ParamÃ¨tres d'affichage collaboratifs
show_participant_tops BOOLEAN â†’ affichage classement temps rÃ©el
highlight_speakers BOOLEAN â†’ mise en Ã©vidence interlocuteurs
```

#### **3. Synchronisation Ã‰valuations**

```sql
-- Mode anonyme configurable
shared_evaluation_sessions.anonymous_mode BOOLEAN DEFAULT true

-- Affichage temps rÃ©el des Ã©valuations
show_tops_realtime BOOLEAN DEFAULT false
```

### ðŸŽ­ **Modes de Collaboration**

#### **Mode Session (`session_mode`)**

- **`'paused'`** : Session en pause, navigation libre
- **`'playing'`** : Lecture synchronisÃ©e, Ã©valuations temps rÃ©el
- **`'reviewing'`** : RÃ©vision collaborative des Ã©valuations

#### **Mode Vue (`view_mode`)**

- **`'word'`** : Navigation mot par mot (granularitÃ© maximale)
- **`'sentence'`** : Navigation phrase par phrase
- **`'paragraph'`** : Navigation paragraphe par paragraphe

#### **Mode Affichage**

- **Mode anonyme** : Ã‰valuations sans rÃ©vÃ©ler l'identitÃ©
- **Classement temps rÃ©el** : Comparaison performance participants
- **Surlignage adaptatif** : Mise en Ã©vidence selon prÃ©fÃ©rences

## Innovations Techniques

### ðŸš€ **GranularitÃ© Ultra-Fine**

```sql
-- Ã‰valuation prÃ©cise au mot prÃ¨s
participant_evaluations.word_start_id â†’ public.word.wordid
participant_evaluations.word_end_id â†’ public.word.wordid
participant_evaluations.audio_timestamp NUMERIC
```

**CapacitÃ©s rÃ©vÃ©lÃ©es** :

- **SÃ©lection prÃ©cise** : Du mot X au mot Y dans la transcription
- **Synchronisation audio** : Position exacte dans l'enregistrement
- **Ã‰valuation contextuelle** : Sujet + pratique + commentaire sur passage prÃ©cis

### ðŸŽ¨ **Whiteboard Infini**

```sql
-- Positionnement libre des Ã©lÃ©ments
postits.x DOUBLE PRECISION DEFAULT 0
postits.y DOUBLE PRECISION DEFAULT 0
postits.color TEXT DEFAULT 'yellow'
```

**FonctionnalitÃ©s** :

- **Espace infini** : CoordonnÃ©es flottantes pour positionnement libre
- **Personnalisation** : Couleurs pour catÃ©gorisation visuelle
- **Persistance** : Ã‰tats sauvegardÃ©s avec timestamps

### ðŸ§  **Feedback Adaptatif**

```sql
-- Configuration flexible d'enquÃªtes
survey_settings.closed_options JSONB
whiteboard_question.question TEXT
```

**SystÃ¨me intelligent** :

- **Questions dynamiques** : GÃ©nÃ©rÃ©es selon contexte d'Ã©valuation
- **Options configurables** : Structure JSONB pour flexibilitÃ© maximale
- **Collecte multi-format** : Rating + feedback libre + rÃ©ponses fermÃ©es

## SÃ©quences et Gestion des Identifiants

### ðŸ”¢ **Architecture Hybride Identifiants**

| Type        | Tables                                                                               | Usage                         | Avantage                          |
| ----------- | ------------------------------------------------------------------------------------ | ----------------------------- | --------------------------------- |
| **UUID**    | `shared_evaluation_sessions`,`participant_evaluations`,`postits`                     | **Collaboration temps rÃ©el**  | Distribution, unicitÃ© globale     |
| **INTEGER** | `sessions`,`survey_settings`,`survey_responses`,`whiteboard_question`,`current_view` | **Configuration & rÃ©fÃ©rence** | Performance, relations optimisÃ©es |

#### **SÃ©quences Configuration** (5 sÃ©quences)

```sql
-- SÃ©quences INTEGER pour performance
current_view_id_seq, sessions_id_seq, survey_responses_id_seq,
survey_settings_id_seq, whiteboard_question_id_seq

-- Toutes : start_value=1, increment=1, max=2147483647
```

### ðŸŽ¯ **Classification Fonctionnelle des Identifiants**

#### **ACTOR_ID (Utilisateurs Collaboratifs)**

- `shared_evaluation_sessions.coach_user_id` : Responsable session
- `survey_responses.participant_id` : RÃ©pondant enquÃªte

#### **SESSION_ID (Sessions Collaboratives)**

- `participant_evaluations.session_id` : Session d'Ã©valuation partagÃ©e
- `participant_evaluations.participant_session_id` : Session participant individuelle

#### **CONTENT_ID (Contenu MÃ©tier RÃ©fÃ©rencÃ©)**

- `participant_evaluations.call_id` : Appel Ã©valuÃ© collaborativement
- `shared_evaluation_sessions.call_id` : Appel de la session partagÃ©e

#### **GENERAL_ID (Identifiants Techniques)**

- Tous les autres identifiants : clÃ©s primaires et rÃ©fÃ©rences

## Architecture UUID et Performance

### âš¡ **Optimisations Temps RÃ©el**

#### **Index SpÃ©cialisÃ©s Collaboration**

```sql
-- Performance temps rÃ©el critique
CREATE INDEX idx_shared_sessions_realtime
ON shared_evaluation_sessions (id, updated_at, is_active);

-- Contrainte mÃ©tier : Un coach actif Ã  la fois
CREATE UNIQUE INDEX unique_active_session_per_coach
ON shared_evaluation_sessions (coach_user_id)
WHERE is_active = true;
```

#### **Patterns de RequÃªtes OptimisÃ©es**

```sql
-- Sessions actives temps rÃ©el (utilise idx_shared_sessions_realtime)
SELECT * FROM shared_evaluation_sessions
WHERE is_active = true
ORDER BY updated_at DESC;

-- Ã‰valuations session en cours
SELECT pe.*, ses.audio_position, ses.current_word_index
FROM participant_evaluations pe
JOIN shared_evaluation_sessions ses ON pe.session_id = ses.id
WHERE ses.is_active = true AND ses.coach_user_id = ?;
```

#### **VolumÃ©trie OpÃ©rationnelle Actuelle**

- **9 sessions** crÃ©Ã©es avec 24 mises Ã  jour (Ã©volution temps rÃ©el active)
- **5 participants** actifs avec sessions INSERT-heavy
- **Interface synchronisÃ©e** : 13 mises Ã  jour `current_view` (navigation partagÃ©e)
- **Feedback authentique** : 4 rÃ©ponses collectÃ©es
- **Potentiel inexploitÃ©** : `participant_evaluations` vide (fonctionnalitÃ© prÃªte)

## Workflows de Collaboration

### ðŸŽ¬ **ScÃ©nario Type : Session d'Ã‰valuation Collaborative**

#### **1. Initialisation Session**

```sql
-- Coach lance session d'Ã©valuation
INSERT INTO shared_evaluation_sessions (coach_user_id, call_id, session_name, session_mode)
VALUES (?, ?, 'Ã‰valuation Call #123', 'paused');

-- Participants rejoignent
INSERT INTO sessions (idavatar, nom, url) VALUES (?, 'Conseiller A', '/avatar/1');
```

#### **2. Navigation SynchronisÃ©e**

```sql
-- Coach navigue â†’ synchronisation participants
UPDATE shared_evaluation_sessions
SET current_word_index = 145, audio_position = 32.5, updated_at = now()
WHERE id = ? AND coach_user_id = ?;
```

#### **3. Ã‰valuations Granulaires**

```sql
-- Participant Ã©value passage prÃ©cis
INSERT INTO participant_evaluations (
    session_id, participant_session_id, call_id,
    word_start_id, word_end_id, audio_timestamp,
    transcription_segment, comment, assigned_pratique_id
) VALUES (?, ?, ?, 140, 150, 32.5, 'Bonjour, merci de nous appeler', 'Excellente ouverture', 3);
```

#### **4. Feedback Collaboratif**

```sql
-- Configuration enquÃªte post-session
INSERT INTO survey_settings (question_open, closed_options)
VALUES ('Comment Ã©valuez-vous cette session collaborative ?',
        '{"type": "rating", "scale": [1,2,3,4,5], "labels": ["TrÃ¨s mauvais", "Excellent"]}');

-- Collecte rÃ©ponses
INSERT INTO survey_responses (participant_id, survey_id, rating, feedback)
VALUES (?, ?, 4, 'Session trÃ¨s productive, granularitÃ© mot-par-mot trÃ¨s utile');
```

## IntÃ©gration avec l'Ã‰cosystÃ¨me 000-CADO

### ðŸ”„ **Pipeline Ã‰tendu avec Collaboration**

```
Appel uploadÃ© (public.call)
    â†“
Transcription mot-par-mot (public.word)
    â†“
Session collaborative lancÃ©e (whiteboard.shared_evaluation_sessions)
    â†“
Ã‰valuations granulaires temps rÃ©el (whiteboard.participant_evaluations)
    â†“
    â”œâ”€â”€ RÃ©fÃ©rences public.word (granularitÃ©)
    â”œâ”€â”€ Assignation public.pratiques (compÃ©tences)
    â””â”€â”€ Contexte public.sujets (mÃ©tier)
    â†“
SynthÃ¨se et feedback (whiteboard.survey_responses)
    â†“
Plan d'action personnalisÃ© (public.activitesconseillers)
```

### ðŸ¤ **Valeur AjoutÃ©e Collaborative**

#### **Ã‰valuation Enrichie**

- **Multi-perspectives** : Coach + conseiller Ã©valuent simultanÃ©ment
- **GranularitÃ© inÃ©galÃ©e** : Ã‰valuation mot par mot impossible manuellement
- **Contexte prÃ©servÃ©** : Timestamp audio + segment transcription

#### **Apprentissage AccÃ©lÃ©rÃ©**

- **Temps rÃ©el** : Pas d'attente pour feedback
- **Visuel** : Post-its et annotations pour mÃ©morisation
- **Adaptatif** : Questions gÃ©nÃ©rÃ©es selon contexte

#### **TraÃ§abilitÃ© ComplÃ¨te**

- **Audit trail** : Qui a Ã©valuÃ© quoi, quand, comment
- **AmÃ©lioration continue** : Feedback sur efficacitÃ© collaborative
- **RGPD compliant** : Anonymisation prÃ©servant l'utilitÃ©

---

## Conclusion

Le schÃ©ma `whiteboard` rÃ©vÃ¨le une **innovation majeure** dans la collaboration temps rÃ©el pour l'Ã©valuation qualitÃ©. Avec sa **granularitÃ© mot-par-mot** , sa **synchronisation multi-niveaux** et son **systÃ¨me de feedback adaptatif** , il transforme l'Ã©valuation qualitÃ© d'un exercice solitaire en une **expÃ©rience collaborative enrichissante** .

L'architecture **UUID + INTEGER hybride** , les **relations de protection intelligentes** et l'**intÃ©gration profonde** avec le schÃ©ma `public` dÃ©montrent une sophistication technique qui positionne 000-CADO comme une solution de **nouvelle gÃ©nÃ©ration** dans le domaine de l'Ã©valuation qualitÃ© collaborative assistÃ©e par IA.

Cette capacitÃ© d'Ã©valuation collaborative temps rÃ©el, combinÃ©e Ã  la granularitÃ© mot-par-mot, constitue un **avantage concurrentiel majeur** face aux solutions traditionnelles d'Ã©valuation qualitÃ©.
