# Documentation Base de Donn√©es Supabase - 000-CADO

## Informations G√©n√©rales

- **Nom du projet** : 000-CADO
- **URL** : supabase.com/dashboard/project/jregkxiwrmquslbootcz
- **R√©gion** : [√Ä compl√©ter]
- **Version PostgreSQL** : 15.1 (Ubuntu)
- **Nombre total de tables** : 125 tables r√©parties sur 12 sch√©mas m√©tier
- **Derni√®re mise √† jour doc** : 13 juin 2025

## Vue d'Ensemble de l'Architecture

### Architecture Multi-Sch√©mas Compl√®te

La base de donn√©es 000-CADO r√©v√®le une **architecture sophistiqu√©e multi-domaines** avec **125 tables** r√©parties sur **12 sch√©mas m√©tier sp√©cialis√©s** , plus les sch√©mas syst√®me PostgreSQL et Supabase. Cette organisation t√©moigne d'une √©volution vers une plateforme d'√©valuation qualit√© √©tendue, d√©passant le simple coaching t√©l√©phonique pour int√©grer g√©olocalisation, linguistique, marketing et collaboration temps r√©el.

### R√©partition des Sch√©mas par Domaine

| Sch√©ma           | Tables   | Type  | Propri√©taire      | Domaine Fonctionnel                                     |
| ---------------- | -------- | ----- | ----------------- | ------------------------------------------------------- |
| **public**       | 46       | BASE  | pg_database_owner | **Core M√©tier**- √âvaluation qualit√© & coaching          |
| **auth**         | 16       | BASE  | supabase_admin    | **Authentification**- Utilisateurs, sessions, tokens    |
| **cartographie** | 15       | BASE  | postgres          | **G√©olocalisation**- Donn√©es territoriales & mapping    |
| **realtime**     | 10       | BASE  | supabase_admin    | **Temps R√©el**- Subscriptions & collaboration live      |
| **whiteboard**   | 8        | BASE  | postgres          | **Collaboration**- Sessions coach/conseiller synchrones |
| **marketing**    | 7        | BASE  | postgres          | **Analytics**- M√©triques, campagnes, engagement         |
| **linguistic**   | 6        | BASE  | postgres          | **NLP**- Traitement linguistique & analyse s√©mantique   |
| **mailing**      | 5        | BASE  | postgres          | **Communication**- Templates, envois, domaines          |
| **storage**      | 5        | BASE  | supabase_admin    | **Stockage**- Buckets, objets, m√©tadonn√©es              |
| **pgsodium**     | 1+4 vues | MIXED | supabase_admin    | **Chiffrement**- S√©curit√© donn√©es sensibles             |
| **vault**        | 1+1 vue  | MIXED | supabase_admin    | **Secrets**- Coffre-fort credentials                    |
| **extensions**   | 0+2 vues | VIEWS | postgres          | **Syst√®me**- Extensions PostgreSQL actives              |

### Architecture Fonctionnelle par Couches

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    COUCHE PR√âSENTATION                          ‚îÇ
‚îÇ  GraphQL API (graphql, graphql_public) + REST Endpoints        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     COUCHE M√âTIER                               ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  CORE   ‚îÇ  ‚îÇ EXTENSIONS  ‚îÇ  ‚îÇCOLLABORATION‚îÇ  ‚îÇ  ANALYTICS  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ public  ‚îÇ  ‚îÇcartographie ‚îÇ  ‚îÇ  whiteboard ‚îÇ  ‚îÇ  marketing  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ(46 tbl) ‚îÇ  ‚îÇ linguistic  ‚îÇ  ‚îÇ  realtime   ‚îÇ  ‚îÇ   mailing   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ         ‚îÇ  ‚îÇ   (26 tbl)  ‚îÇ  ‚îÇ  (18 tbl)   ‚îÇ  ‚îÇ  (12 tbl)   ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   COUCHE INFRASTRUCTURE                         ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îÇ
‚îÇ  ‚îÇ   AUTH    ‚îÇ  ‚îÇ S√âCURIT√â  ‚îÇ  ‚îÇ  STORAGE  ‚îÇ  ‚îÇ  SYST√àME  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ   auth    ‚îÇ  ‚îÇ pgsodium  ‚îÇ  ‚îÇ  storage  ‚îÇ  ‚îÇextensions ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ (16 tbl)  ‚îÇ  ‚îÇ   vault   ‚îÇ  ‚îÇ  (5 tbl)  ‚îÇ  ‚îÇ (2 vues)  ‚îÇ    ‚îÇ
‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ  (2+5 v)  ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ           ‚îÇ    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## Domaines Fonctionnels D√©taill√©s

### üéØ Core M√©tier (46 tables - Sch√©ma `public`)

**Propri√©taire** : pg_database_owner

**Mission** : C≈ìur de l'√©valuation qualit√© et du coaching t√©l√©phonique

**Tables principales** :

- `users`, `entreprises`, `conseillers` : Gestion utilisateurs multi-tenant
- `call`, `transcript`, `word` : Pipeline transcription et analyse
- `pratiques`, `exercices`, `activitesconseillers` : Coaching personnalis√©
- `lpltag`, `turntagged` : Grilles qualit√© et affectation crit√®res
- `roleplaydata`, `postit` : Jeu de r√¥le IA et whiteboard collaboratif

**Flux principal** : Upload appel ‚Üí Transcription ‚Üí √âvaluation crit√®res ‚Üí Coaching ‚Üí Plan d'entra√Ænement

### üó∫Ô∏è Extensions G√©ographiques & Linguistiques (21 tables)

#### Sch√©ma `cartographie` (15 tables)

**Mission** : Visualisation et navigation dans les donn√©es d'√©valuation qualit√©

**Tables de Mindmapping** :

- `mindmap_data`, `mindmapnodes`, `mindmapedges` : Structure de cartes mentales pour visualisation des crit√®res qualit√©
- `mindmapconversation_nodes`, `mindmapconversation_edges` : Mapping des flux conversationnels
- `nodegroups`, `groupnode_tags` : Regroupement et cat√©gorisation des √©l√©ments

**Tables de Workflow** :

- `tagflow_nodes`, `tagflow_nodes2` : Flux de traitement des tags qualit√©
- `axes`, `axevalues` : D√©finition des axes d'√©valuation personnalis√©s
- `ficheaction` : Plans d'action g√©n√©r√©s depuis les cartes

**Tables d'Interface** :

- `appels` : Mapping avec les appels du sch√©ma public
- `postits` : √âl√©ments collaboratifs (li√© au whiteboard)
- `vueglobale` : Vues synth√©tiques personnalis√©es

#### Sch√©ma `linguistic` (6 tables)

**Mission** : Moteur d'analyse linguistique et scoring automatique

**Tables de Mod√©lisation** :

- `models` : Mod√®les IA pour analyse des appels (sentiment, qualit√©, etc.)
- `models_criteria` : Crit√®res d'√©valuation par mod√®le
- `criteria_families`, `criteria_definition_family` : Taxonomie des crit√®res linguistiques

**Tables de R√©sultats** :

- `verbatims_metadata` : M√©tadonn√©es des extraits analys√©s
- `verbatims_models_results` : R√©sultats d'analyse par mod√®le IA

### ü§ù Collaboration Temps R√©el (18 tables)

#### Sch√©ma `whiteboard` (8 tables)

**Propri√©taire** : postgres

**Mission** : Plateforme collaborative d'√©valuation et coaching

**Tables de Sessions** :

- `sessions` : Sessions de coaching collaboratives
- `shared_evaluation_sessions` : Partage d'√©valuations entre coach/conseiller
- `current_view` : √âtat actuel de l'interface collaborative

**Tables d'Interaction** :

- `postits` : √âl√©ments visuels partag√©s (post-its, annotations)
- `participant_evaluations` : √âvaluations individuelles des participants

**Tables de Feedback** :

- `survey_settings`, `survey_responses` : Configuration et r√©ponses questionnaires
- `whiteboard_question` : Questions dynamiques g√©n√©r√©es pendant les sessions

#### Sch√©ma `realtime` (10 tables)

**Propri√©taire** : supabase_admin

**Mission** : Infrastructure temps r√©el Supabase

- Subscriptions pour notifications live
- Gestion des connexions simultan√©es
- Events et triggers pour mises √† jour instantan√©es

### üìä Analytics & Communication (12 tables)

#### Sch√©ma `marketing` (7 tables)

**Mission** : Gestion contacts et ciblage marketing intelligent

**Tables de Contacts** :

- `contacts` : Base contacts unifi√©e
- `oximailing_contact` : Int√©gration avec solution mailing Oximailing
- `domain_companies_email*` : 3 tables pour nettoyage et validation emails entreprises

**Tables de Ciblage** :

- `email_models` : Templates et mod√®les d'emails
- `filtrage_regles` : R√®gles de segmentation et ciblage

#### Sch√©ma `mailing` (5 tables)

**Mission** : Infrastructure d'envoi et d√©livrabilit√© emails

**Tables de Configuration** :

- `domain_references` : Domaines exp√©diteurs et r√©putation
- `domain_references_duplicate` : Gestion des doublons de domaines
- `email_patterns` : Patterns de validation emails
- `filter_models`, `filtered_contacts` : Filtrage et qualification contacts

### üîí Infrastructure S√©curis√©e (28 tables + vues)

#### Sch√©ma `auth` (16 tables)

**Propri√©taire** : supabase_admin

**Mission** : Authentification compl√®te Supabase

- Gestion utilisateurs, sessions, tokens refresh
- OAuth et identit√©s multiples
- Audit connexions et s√©curit√©

#### Sch√©ma `storage` (5 tables)

**Mission** : Stockage fichiers s√©curis√©

- Buckets : avatars, documents, audio_files, whiteboard_exports
- M√©tadonn√©es et permissions granulaires
- Politiques RLS sur objets stock√©s

#### Sch√©mas S√©curit√© Avanc√©e

- **`pgsodium`** (1 table + 4 vues) : Chiffrement donn√©es sensibles (appels, transcriptions)
- **`vault`** (1 table + 1 vue) : Coffre-fort pour credentials APIs externes
- **`extensions`** (2 vues) : Monitoring extensions PostgreSQL actives

## Particularit√©s Architecturales

### üèóÔ∏è Architecture Multi-Tenant Sophistiqu√©e

**Segmentation par entreprise** avec isolation compl√®te :

```sql
-- Exemple de requ√™te cross-sch√©mas s√©curis√©e
SELECT
  a.sidebar_phase,                    -- coaching (public)
  c.region_name,                      -- g√©olocalisation (cartographie)
  m.engagement_score,                 -- analytics (marketing)
  l.sentiment_analysis                -- linguistique (linguistic)
FROM public.activitesconseillers a
JOIN cartographie.conseiller_regions cr ON a.idconseiller = cr.conseiller_id
JOIN marketing.user_metrics m ON a.idconseiller = m.user_id
JOIN linguistic.call_analysis l ON a.call_id = l.call_id
WHERE a.entreprise_id = get_current_user_enterprise();
```

### üîÑ Temps R√©el Multi-Niveaux

**3 niveaux de temps r√©el** pour coaching collaboratif :

1. **Niveau UI** : `whiteboard` pour partage visuel instantan√©
2. **Niveau Data** : `realtime` pour synchronisation donn√©es
3. **Niveau Business** : Triggers cross-sch√©mas pour coh√©rence m√©tier

### üß† IA et Analyse Pr√©dictive

**Pipeline ML distribu√©** sur plusieurs sch√©mas :

- **`linguistic`** : Mod√®les IA pour scoring automatique qualit√© (`models`, `models_criteria`)
- **`cartographie`** : Visualisation intelligente des patterns conversationnels (`mindmap*`)
- **`marketing`** : Ciblage et segmentation automatis√©e (`filtrage_regles`, `email_models`)
- **`whiteboard`** : Questions adaptatives g√©n√©r√©es en temps r√©el (`whiteboard_question`)
- **`public`** : Int√©gration r√©sultats IA dans workflow coaching

### üìà Analytics Cross-Domaines

**M√©triques business** aliment√©es par tous les sch√©mas :

- **Visualisation qualit√©** : `cartographie.mindmap*` + `public.lpltag` + `public.turntagged`
- **Scoring automatique** : `linguistic.models*` + `public.call` + `public.transcript`
- **Coaching collaboratif** : `whiteboard.sessions` + `public.activitesconseillers` + `realtime`
- **Communication cibl√©e** : `marketing.contacts` + `mailing.domain_references` + `public.entreprises`

## R√©v√©lations Architecturales Majeures

### üéØ **000-CADO n'est PAS qu'une plateforme de coaching**

L'analyse des 125 tables r√©v√®le **3 couches applicatives distinctes** :

#### 1. **Couche Coaching Core** (Sch√©ma `public` - 46 tables)

- √âvaluation qualit√© classique (call ‚Üí transcript ‚Üí crit√®res)
- Sessions coaching individuelles (activitesconseillers)
- Plans d'entra√Ænement personnalis√©s (exercices, nudges)

#### 2. **Couche Visualisation & IA** (Sch√©mas `cartographie` + `linguistic` - 21 tables)

- **Mindmapping conversationnel** : Navigation visuelle dans les appels via cartes mentales
- **Scoring IA automatique** : Mod√®les linguistiques pour pr√©-√©valuation des appels
- **Flux de tags intelligents** : Automation de l'affectation des crit√®res qualit√©

#### 3. **Couche Collaboration & Marketing** (Sch√©mas `whiteboard` + `marketing` + `mailing` - 20 tables)

- **Coaching collaboratif temps r√©el** : Sessions synchrones coach/conseiller avec whiteboard
- **Marketing automation** : Ciblage et communication personnalis√©e
- **Infrastructure mailing** : Gestion domaines et d√©livrabilit√© emails

### üöÄ **Architecture de Plateforme SaaS Compl√®te**

La r√©partition des tables r√©v√®le une **v√©ritable plateforme SaaS multi-produits** :

```
PRODUIT 1: Coaching IA (public + linguistic)
    ‚Üì
PRODUIT 2: Mindmapping Qualit√© (cartographie)
    ‚Üì
PRODUIT 3: Collaboration Live (whiteboard + realtime)
    ‚Üì
PRODUIT 4: Marketing Automation (marketing + mailing)
```

**Chaque "produit" peut fonctionner ind√©pendamment** mais se nourrit des donn√©es des autres pour cr√©er une exp√©rience int√©gr√©e unique.

## Architecture de Donn√©es Cross-Sch√©mas

### Relations Inter-Sch√©mas Critiques

L'analyse des **foreign keys cross-sch√©mas** r√©v√®le 3 patterns d'int√©gration principaux :

#### 1. **Pipeline IA Linguistique** (`linguistic` ‚Üí `public`)

**Relation centrale** : Analyse IA des passages d'appels √©valu√©s

```sql
linguistic.verbatims_metadata.turn_id ‚Üí public.turntagged.id (CASCADE DELETE)
linguistic.verbatims_models_results.turn_id ‚Üí public.turntagged.id (CASCADE DELETE)
```

**Flux de donn√©es** :

```
public.call ‚Üí public.turntagged (affectation crit√®res manuels)
       ‚Üì
linguistic.verbatims_* (analyse IA automatique)
       ‚Üì
R√©sultats IA r√©inject√©s dans √©valuation qualit√©
```

**Implications** :

- **CASCADE DELETE** : Suppression d'un passage √©valu√© = suppression analyses IA
- **Protection forte** : Les analyses IA suivent le cycle de vie des √©valuations
- **Performance** : Chaque `turntagged` peut avoir plusieurs analyses IA simultan√©es

#### 2. **Collaboration Temps R√©el** (`whiteboard` ‚Üí `public` + `auth`)

**Relations d'√©valuation collaborative** :

```sql
-- √âvaluations d√©taill√©es avec r√©f√©rences pr√©cises
whiteboard.participant_evaluations ‚Üí public.call (NO ACTION)
whiteboard.participant_evaluations ‚Üí public.pratiques (NO ACTION)
whiteboard.participant_evaluations ‚Üí public.word (NO ACTION - r√©f√©rence mot pr√©cis)
whiteboard.participant_evaluations ‚Üí public.sujets (NO ACTION)

-- Sessions collaboratives
whiteboard.sessions ‚Üí public.avatars (CASCADE DELETE)
whiteboard.shared_evaluation_sessions ‚Üí public.call + auth.users (NO ACTION)
```

**Flux collaboratif** :

```
Coach lance session ‚Üí whiteboard.shared_evaluation_sessions
       ‚Üì
√âvaluation collaborative ‚Üí whiteboard.participant_evaluations
       ‚Üì
R√©f√©rences pr√©cises ‚Üí public.word (mot par mot)
       ‚Üì
Crit√®res appliqu√©s ‚Üí public.pratiques
```

**Implications** :

- **Granularit√© maximale** : √âvaluation au niveau du mot (`word_start_id`, `word_end_id`)
- **NO ACTION** : Protection des donn√©es m√©tier (appels, pratiques) lors suppression sessions
- **Multi-utilisateur** : Coach + conseiller √©valuent simultan√©ment

#### 3. **Audit et Sessions Utilisateurs** (`public` ‚Üí `auth`)

**Tra√ßabilit√© des connexions** :

```sql
public.user_sessions_backup.user_id ‚Üí auth.users.id (NO ACTION)
whiteboard.survey_responses.participant_id ‚Üí auth.users.id (SET NULL)
```

**Strat√©gies de suppression diff√©renci√©es** :

- **NO ACTION** : Audit trail pr√©serv√© m√™me apr√®s suppression utilisateur
- **SET NULL** : Anonymisation des r√©ponses survey si utilisateur supprim√©

### Matrice de Couplage Cross-Sch√©mas

| Source Schema  | Target Schema | Nombre Relations | Type Couplage | Strat√©gie Suppression         |
| -------------- | ------------- | ---------------- | ------------- | ----------------------------- |
| **linguistic** | **public**    | **16**           | **FORT**      | CASCADE (suit √©valuations)    |
| **whiteboard** | **public**    | **6**            | **MOYEN**     | NO ACTION (protection m√©tier) |
| **whiteboard** | **auth**      | **2**            | **FAIBLE**    | SET NULL (anonymisation)      |
| **public**     | **auth**      | **1**            | **FAIBLE**    | NO ACTION (audit)             |

### Points d'Architecture Critiques

#### üîÑ **Synchronisation IA ‚Üî √âvaluation Manuelle**

- **D√©fi** : `linguistic` CASCADE suit `public.turntagged`
- **Risque** : Suppression accidentelle passage = perte analyses IA
- **Solution** : Soft delete sur `turntagged` plut√¥t que suppression physique

#### üéØ **Granularit√© d'√âvaluation Ultra-Fine**

- **Innovation** : √âvaluation au niveau du mot (`participant_evaluations` ‚Üí `word`)
- **Usage** : Coach peut annoter phrase pr√©cise pendant session live
- **Performance** : Index critiques sur `public.word` pour temps r√©el

#### üõ°Ô∏è **Protection Asym√©trique**

- **M√©tier prot√©g√©** : `public.call`, `public.pratiques` (NO ACTION)
- **Sessions volatiles** : `whiteboard.*` peut √™tre supprim√© sans impact m√©tier
- **Audit pr√©serv√©** : `user_sessions_backup` survit √† suppression utilisateurs

**D√©fis identifi√©s** :

- **Requ√™tes cross-sch√©mas** : Risque de performance sur jointures complexes
- **Volum√©trie distribu√©e** : 125 tables avec croissance h√©t√©rog√®ne
- **Temps r√©el multi-sch√©mas** : Synchronisation et coh√©rence des donn√©es

**Optimisations recommand√©es** :

- Index cross-sch√©mas pour requ√™tes fr√©quentes
- Read replicas par domaine fonctionnel
- Cache Redis pour analytics temps r√©el
- Partitioning par entreprise sur tables volumineuses

### üõ°Ô∏è S√©curit√© Multi-Niveaux

**Architecture de s√©curit√© en profondeur** :

- **RLS par sch√©ma** : Isolation tenant-level sur chaque domaine
- **Chiffrement diff√©renci√©** : `pgsodium` pour donn√©es sensibles uniquement
- **Audit trail complet** : Logs et historiques sur tous les sch√©mas
- **Secrets centralis√©s** : `vault` pour credentials externes

### üîÑ √âvolution et Maintenance

**Architecture pr√©par√©e pour l'√©volution** :

- **S√©paration des domaines** : √âvolution ind√©pendante possible
- **APIs auto-g√©n√©r√©es** : GraphQL sur l'ensemble des 125 tables
- **Microservices candidats** : Chaque sch√©ma peut devenir un service
- **Monitoring granulaire** : M√©triques par domaine fonctionnel

## Synth√®se Architecturale et Recommandations

### üèóÔ∏è **Architecture R√©v√©l√©e : Plateforme Enterprise S√©curis√©e**

#### **000-CADO = Suite Int√©gr√©e Multi-Produits**

L'analyse compl√®te r√©v√®le **4 produits distincts** mais int√©gr√©s :

1. **üß† Coaching IA Avanc√©** (`public` + `linguistic`)
   - √âvaluation qualit√© automatis√©e par IA
   - Coaching personnalis√© bas√© sur analyse linguistique
   - Pipeline : Appel ‚Üí Transcription ‚Üí IA ‚Üí Coaching ‚Üí Suivi
2. **üó∫Ô∏è Mindmapping Conversationnel** (`cartographie`)
   - Navigation visuelle dans les conversations
   - Cartes mentales des flux qualit√© (10 JSONB + 17 UUID)
   - Innovation : Repr√©sentation graphique des crit√®res d'√©valuation
3. **ü§ù Collaboration Temps R√©el** (`whiteboard` + `realtime`)
   - Sessions coach/conseiller synchrones
   - √âvaluation collaborative granulaire (mot par mot)
   - Partitioning temporel automatique (tables jour par jour)
4. **üìß Marketing B2B Automation** (`marketing` + `mailing`)
   - CRM int√©gr√© avec ciblage intelligent
   - Gestion domaines et d√©livrabilit√© emails
   - Segmentation automatis√©e des contacts

### üõ°Ô∏è **Niveau de S√©curit√© Exceptionnel**

#### **Triple Couche de Protection**

1. **Niveau Infrastructure** (155 objets pgsodium + 37 pgcrypto)
   - Chiffrement bout-en-bout des donn√©es sensibles
   - Masquage automatique pour conformit√© RGPD
   - Gestion centralis√©e des cl√©s avec rotation
2. **Niveau Application** (32 UUID auth + RLS temps r√©el)
   - Identification non-guessable de tous les objets
   - Filtrage s√©curis√© m√™me en collaboration temps r√©el
   - Audit trail complet (43 timestamps auth)
3. **Niveau M√©tier** (Coffre-fort vault + permissions granulaires)
   - Secrets management pour APIs externes
   - Permissions personnalis√©es sur 100% des objets critiques
   - S√©paration stricte des responsabilit√©s par propri√©taire

### ‚ö° **Performance et Scalabilit√©**

#### **Architecture Distribu√©e Optimis√©e**

- **Partitioning intelligent** : `realtime` par jour, √©vite les tables monstres
- **Couplage ma√Ætris√©** : Hub central `public`, extensions isol√©es
- **Index sp√©cialis√©s** : GIN pour JSONB, BTREE pour relations, UUID pour s√©curit√©
- **Monitoring natif** : pg_stat_statements pour optimisations proactives

### üéØ **Positionnement March√© Unique**

#### **Concurrent Direct De :**

- **Salesforce Service Cloud** (CRM + Coaching)
- **Gong.io** (Analyse conversations IA)
- **Miro** (Collaboration visuelle)
- **Mailchimp** (Marketing automation)

#### **Avantage Diff√©renciant :**

**Suite int√©gr√©e** vs assemblage d'outils s√©par√©s

- Donn√©es partag√©es entre tous les modules
- Workflow unifi√© : Appel ‚Üí IA ‚Üí Mindmap ‚Üí Coaching ‚Üí Marketing
- S√©curit√© niveau bancaire sur toute la cha√Æne
- Temps r√©el natif sur l'ensemble des fonctionnalit√©s

### üìä **Recommandations Strat√©giques**

#### **üöÄ √âvolution Architecture**

1. **Microservices Candidats** (chaque sch√©ma = service potentiel)
   - Service Core : `public` (46 tables)
   - Service IA : `linguistic` (6 tables)
   - Service Collaboration : `whiteboard` + `realtime` (18 tables)
   - Service Analytics : `cartographie` + `marketing` + `mailing` (27 tables)
2. **Optimisations Performance**
   - Cache Redis pour requ√™tes cross-sch√©mas fr√©quentes
   - Read replicas par domaine fonctionnel
   - CDN pour assets statiques (mindmaps, avatars)
3. **Renforcement S√©curit√©**
   - HSM externe pour cl√©s critiques
   - Vault externe (HashiCorp) pour secrets sensibles
   - Audit SIEM pour conformit√© enterprise

#### **üíº Positionnement Commercial**

**March√© Cible R√©v√©l√©** :

- **Secteur Financier** : Centres d'appels bancaires/assurance
- **Secteur Sant√©** : Plateformes t√©l√©m√©dicales
- **Secteur Public** : Centres de contact citoyens
- **Enterprise B2B** : √âquipes commerciales haut de gamme

**Arguments Diff√©renciants** :

- "Seule plateforme coaching IA + mindmapping + temps r√©el int√©gr√©e"
- "S√©curit√© niveau bancaire sur toute la cha√Æne de valeur"
- "ROI imm√©diat : 4 outils remplac√©s par 1 suite int√©gr√©e"

---

> **Conclusion** : 000-CADO n'est pas un simple outil de coaching mais une **plateforme d'√©valuation qualit√© de nouvelle g√©n√©ration** combinant IA, collaboration temps r√©el, visualisation innovante et s√©curit√© militaire. Son architecture multi-sch√©mas r√©v√®le une sophistication technique qui la positionne comme concurrent direct des leaders du march√© enterprise.
