# Whiteboard - Plateforme d'Ã‰valuation et Formation Collaborative

## ðŸ“‹ Description du Projet

**Plateforme avancÃ©e d'Ã©valuation et de formation** dÃ©veloppÃ©e avec Next.js 14+, spÃ©cialisÃ©e dans l'analyse d'appels tÃ©lÃ©phoniques, l'Ã©valuation de conseillers, et la formation collaborative. Cette application combine tableau blanc interactif, intelligence artificielle, transcription audio, et outils d'Ã©valuation pour crÃ©er un Ã©cosystÃ¨me complet de formation professionnelle.

## ðŸš€ FonctionnalitÃ©s Principales

### **ðŸŽ¯ Ã‰valuation et Formation**

- **Ã‰valuation d'appels** : Analyse et notation d'appels tÃ©lÃ©phoniques
- **Module admin** : Gestion des entreprises, grilles de qualitÃ©, pondÃ©ration
- **Four Zones** : MÃ©thodologie d'Ã©valuation en 4 zones avec IA
- **Post-its collaboratifs** : SystÃ¨me d'annotation et de feedback
- **EntraÃ®nement et suivi** : Parcours de formation personnalisÃ©s

### **ðŸ¤– Intelligence Artificielle**

- **Transcription automatique** : Conversion speech-to-text des appels
- **IA d'amÃ©lioration** : Suggestions d'amÃ©lioration automatiques
- **Text-to-Speech (TTS)** : GÃ©nÃ©ration audio Ã  partir de texte
- **Analyse conversationnelle** : Ã‰valuation automatique des Ã©changes

### **ðŸ’¾ IntÃ©gration Cloud**

- **Zoho WorkDrive** : Stockage et synchronisation cloud
- **Upload audio/vidÃ©o** : Gestion complÃ¨te des fichiers multimÃ©dias
- **Partage d'Ã©valuations** : Sessions collaboratives en temps rÃ©el

### **ðŸ“Š Whiteboard Collaboratif**

- **Canvas interactif** : Dessin et annotation collaborative
- **Sessions partagÃ©es** : Ã‰valuation en temps rÃ©el multi-utilisateurs
- **Navigation par phases** : Structure organisÃ©e par Ã©tapes

## ðŸ› ï¸ Stack Technique

- **Frontend** : Next.js 14+ (App Router), React 18+, TypeScript
- **IA & Audio** : Transcription automatique, TTS, Speech-to-Text
- **Storage** : Zoho WorkDrive, Supabase
- **Styling** : Tailwind CSS, CSS Modules
- **DÃ©ploiement** : Vercel + Netlify (42 environnements actifs)

## ðŸ“ Architecture ComplÃ¨te du Projet

```
whiteboard/
â”œâ”€â”€ app/                           # Next.js App Router principal
â”‚   â”œâ”€â”€ api/                       # Routes API backend
â”‚   â”‚   â”œâ”€â”€ ai/improve/           # IA - AmÃ©lioration de texte
â”‚   â”‚   â”œâ”€â”€ calls/create-from-zoho/ # CrÃ©ation d'appels depuis Zoho
â”‚   â”‚   â”œâ”€â”€ evaluation-sharing/    # API partage d'Ã©valuations temps rÃ©el
â”‚   â”‚   â”‚   â”œâ”€â”€ active-sessions/   # Sessions actives
â”‚   â”‚   â”‚   â”œâ”€â”€ check-session/     # VÃ©rification sessions
â”‚   â”‚   â”‚   â”œâ”€â”€ create-session/    # CrÃ©ation sessions
â”‚   â”‚   â”‚   â”œâ”€â”€ stop-session/      # ArrÃªt sessions
â”‚   â”‚   â”‚   â”œâ”€â”€ update-controls/   # ContrÃ´les interface
â”‚   â”‚   â”‚   â”œâ”€â”€ update-mode/       # Modes d'Ã©valuation
â”‚   â”‚   â”‚   â””â”€â”€ update-position/   # Position timeline
â”‚   â”‚   â”œâ”€â”€ getAudioUrl/          # URLs des fichiers audio
â”‚   â”‚   â”œâ”€â”€ ponderation-sujets/   # PondÃ©ration des sujets
â”‚   â”‚   â”œâ”€â”€ send-training-email/  # Envoi emails formation
â”‚   â”‚   â”œâ”€â”€ transcribe/           # Transcription audio
â”‚   â”‚   â”œâ”€â”€ transcription/get/    # RÃ©cupÃ©ration transcriptions
â”‚   â”‚   â”œâ”€â”€ tts/                  # Text-to-Speech
â”‚   â”‚   â””â”€â”€ zoho/                 # IntÃ©gration Zoho
â”‚   â”‚       â”œâ”€â”€ auth/             # Authentification Zoho
â”‚   â”‚       â”œâ”€â”€ callback/         # Callback OAuth
â”‚   â”‚       â””â”€â”€ workdrive/        # API WorkDrive
â”‚   â”‚
â”‚   â”œâ”€â”€ components/               # Composants rÃ©utilisables
â”‚   â”‚   â”œâ”€â”€ common/              # Composants gÃ©nÃ©riques
â”‚   â”‚   â”‚   â”œâ”€â”€ ActivityIndicator.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ AuthStatus.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ CallSelection.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ EntrepriseSelection.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ GlobalNavBar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NewCallUploader.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PreserveRouteOnRefresh.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SelectionConseiller.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ SelectionEntrepriseEtAppel.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Theme/ThemeProvider.tsx
â”‚   â”‚   â””â”€â”€ navigation/          # Navigation avancÃ©e
â”‚   â”‚       â””â”€â”€ ActivitySidebar/ # Sidebar avec phases d'activitÃ©
â”‚   â”‚           â”œâ”€â”€ components/  # Navigation, phases, Ã©tapes
â”‚   â”‚           â”œâ”€â”€ constants/   # Constantes navigation
â”‚   â”‚           â”œâ”€â”€ hooks/       # Hooks navigation (phases, stats, data)
â”‚   â”‚           â””â”€â”€ types/       # Types navigation
â”‚   â”‚
â”‚   â”œâ”€â”€ evaluation/              # Module d'Ã©valuation complet
â”‚   â”‚   â”œâ”€â”€ admin/              # Interface administrateur
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # Interface admin (sÃ©lecteurs, toolbar)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ sections/   # Sections admin (catÃ©gories, entreprises, grilles)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ dialogs/ # Dialogs d'association
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ forms/   # Formulaires admin avec validation
â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/          # Hooks admin (form, state, validation)
â”‚   â”‚   â”‚   â”œâ”€â”€ services/       # Services donnÃ©es admin
â”‚   â”‚   â”‚   â”œâ”€â”€ types/          # Types admin et formulaires
â”‚   â”‚   â”‚   â””â”€â”€ utils/          # Utilitaires admin
â”‚   â”‚   â”œâ”€â”€ components/         # Composants d'Ã©valuation
â”‚   â”‚   â”‚   â”œâ”€â”€ EntrainementSuivi/ # Module d'entraÃ®nement
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/ # Navigation, preview, ressources
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ styles/     # ThÃ¨mes d'entraÃ®nement
â”‚   â”‚   â”‚   â”œâ”€â”€ FourZones/      # MÃ©thodologie 4 zones
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/ # Zones de drop, navigation, suggestions
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DroppableZone/ # Zones interactives avec IA
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ FinalReviewStep/ # Ã‰tape finale avec TTS
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ components/ # Segments, composer, TTS
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ extensions/ # Agent conversationnel, contrÃ´les
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ hooks/      # Hook TTS
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ types/      # Types TTS et texte
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ utils/      # Utilitaires TTS
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ constants/  # Ã‰tapes et zones
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/      # Drag&Drop, notifications, post-its
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ types/      # Types Four Zones
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ utils/      # IA, gÃ©nÃ©ration texte, roleplay
â”‚   â”‚   â”‚   â”œâ”€â”€ Postit/         # SystÃ¨me de post-its
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/ # Navigation des Ã©tapes
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/      # Actions, navigation, styles post-its
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PostitSteps/ # Ã‰tapes (contexte, pratique, sujet)
â”‚   â”‚   â”‚   â”œâ”€â”€ ShareEvaluationButton/ # Partage d'Ã©valuations
â”‚   â”‚   â”‚   â”œâ”€â”€ SyntheseEvaluation/ # SynthÃ¨se et radar
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ components/ # Cards d'Ã©valuation
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RadarEvaluation/ # Graphiques radar
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ utils/      # Filtres et formatage
â”‚   â”‚   â”‚   â””â”€â”€ UnifiedHeader/  # En-tÃªte unifiÃ©
â”‚   â”‚   â”‚       â””â”€â”€ shared/     # Actions, sÃ©lecteurs, infos appels
â”‚   â”‚   â””â”€â”€ hooks/              # Hooks Ã©valuation temps rÃ©el
â”‚   â”‚
â”‚   â”œâ”€â”€ login/                  # Authentification
â”‚   â”‚   â”œâ”€â”€ Login.tsx
â”‚   â”‚   â””â”€â”€ page.tsx
â”‚   â”‚
â”‚   â”œâ”€â”€ whiteboard/             # Module tableau blanc principal
â”‚   â”‚   â”œâ”€â”€ components/         # Composants whiteboard
â”‚   â”‚   â”‚   â”œâ”€â”€ Avatar/         # SÃ©lection d'avatars
â”‚   â”‚   â”‚   â”œâ”€â”€ CoachingFourZone/ # Coaching avec mÃ©thodologie 4 zones
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AudioList.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AudioUploadModal.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ audioUploadUtils.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthButton.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CallListUnprepared.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CallUploader.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CoachingFourZones.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FilterInput.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FolderTreeView.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ FourZoneNode.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ RemoveCallUpload.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SelectionConseiller.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SnackbarManager.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ supabaseUtils.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Transcript.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ WorkDriveUtils.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Navigation/      # Navigation tableau blanc
â”‚   â”‚   â”‚   â”œâ”€â”€ Postits/        # Post-its interactifs
â”‚   â”‚   â”‚   â”œâ”€â”€ SharedEvaluation/ # Ã‰valuations partagÃ©es temps rÃ©el
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SessionSelector.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SessionStatusBadge.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SharedEvaluationContent.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SharedEvaluationHeader.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SharedEvaluationViewer.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SynchronizedTranscript.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Sondage/        # SystÃ¨me de sondages
â”‚   â”‚   â”‚       â”œâ”€â”€ CoachSurveySettings.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ QuestionCoach.tsx
â”‚   â”‚   â”‚       â””â”€â”€ Sondage.tsx
â”‚   â”‚   â”œâ”€â”€ hooks/              # Hooks whiteboard
â”‚   â”‚   â”‚   â”œâ”€â”€ useRealtimeEvaluationSync.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ useSharedEvaluation.tsx
â”‚   â”‚   â”‚   â””â”€â”€ useSpectatorTranscriptions.tsx
â”‚   â”‚   â”œâ”€â”€ README.MD           # Documentation phases
â”‚   â”‚   â”œâ”€â”€ README4.MD          # Documentation v4
â”‚   â”‚   â”œâ”€â”€ README5.MD          # Documentation v5
â”‚   â”‚   â”œâ”€â”€ README6.MD          # Documentation v6
â”‚   â”‚   â”œâ”€â”€ README_PHASE3.MD    # Documentation Phase 3
â”‚   â”‚   â””â”€â”€ Whiteboard.tsx      # Composant principal
â”‚   â”‚
â”‚   â”œâ”€â”€ zohoworkdrive/          # IntÃ©gration Zoho WorkDrive
â”‚   â”‚   â”œâ”€â”€ components/         # Interface Zoho
â”‚   â”‚   â”‚   â”œâ”€â”€ EnterpriseCallsList.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ FileItem.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ FileList.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Icons.tsx
â”‚   â”‚   â”‚   â””â”€â”€ WorkdriveExplorer.tsx
â”‚   â”‚   â”œâ”€â”€ lib/               # BibliothÃ¨ques Zoho
â”‚   â”‚   â”‚   â”œâ”€â”€ audioUploadUtils.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ removeCallUpload.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ serverUtils.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ supabaseUtils.tsx
â”‚   â”‚   â”‚   â””â”€â”€ zohoworkdrive/  # API et auth Zoho
â”‚   â”‚   â”œâ”€â”€ types/             # Types Zoho
â”‚   â”‚   â””â”€â”€ utils/             # Utilitaires storage et formatage
â”‚   â”‚
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”‚
â”œâ”€â”€ config/                     # Configuration application
â”œâ”€â”€ context/                    # Contextes React globaux
â”œâ”€â”€ hooks/                      # Hooks personnalisÃ©s globaux
â”œâ”€â”€ lib/                        # BibliothÃ¨ques utilitaires
â”œâ”€â”€ public/                     # Assets statiques
â”œâ”€â”€ services/                   # Services mÃ©tier
â”œâ”€â”€ tmp/                        # Fichiers temporaires
â”œâ”€â”€ types/                      # DÃ©finitions TypeScript globales
â”œâ”€â”€ utils/                      # Fonctions utilitaires globales
â”‚
â”œâ”€â”€ .env.local                  # Variables d'environnement
â”œâ”€â”€ erreurs_groupees.txt        # Log centralisÃ© des erreurs
â”œâ”€â”€ eslint.config.mjs          # Configuration ESLint
â”œâ”€â”€ middleware.tsx             # Middleware Next.js
â”œâ”€â”€ next.config.ts             # Configuration Next.js
â”œâ”€â”€ package.json               # DÃ©pendances et scripts
â”œâ”€â”€ SUPABASE.MD               # Documentation Supabase
â””â”€â”€ tsconfig.json             # Configuration TypeScript
```

## ðŸ”§ API Routes DÃ©taillÃ©es

### **Intelligence Artificielle**

```typescript
POST / api / ai / improve; // AmÃ©lioration de texte par IA
POST / api / transcribe; // Transcription audio
GET / api / transcription / get; // RÃ©cupÃ©ration transcriptions
POST / api / tts; // Text-to-Speech
```

### **Ã‰valuation Collaborative**

```typescript
GET / api / evaluation - sharing / active - sessions; // Sessions actives
POST / api / evaluation - sharing / create - session; // CrÃ©er session
POST / api / evaluation - sharing / check - session; // VÃ©rifier session
POST / api / evaluation - sharing / stop - session; // ArrÃªter session
PUT / api / evaluation - sharing / update - controls; // ContrÃ´les interface
PUT / api / evaluation - sharing / update - mode; // Mode d'Ã©valuation
PUT / api / evaluation - sharing / update - position; // Position timeline
```

### **Gestion des Appels**

```typescript
POST / api / calls / create - from - zoho; // CrÃ©er appel depuis Zoho
GET / api / getAudioUrl; // URLs fichiers audio
POST / api / send - training - email; // Emails de formation
```

### **IntÃ©gration Zoho**

```typescript
GET / api / zoho / auth; // Authentification Zoho
POST / api / zoho / callback; // Callback OAuth
GET / api / zoho / workdrive; // API WorkDrive
```

### **Administration**

```typescript
GET / POST / api / ponderation - sujets; // PondÃ©ration des sujets
```

## ðŸŽ¯ Modules Principaux

### **1. Module Ã‰valuation (`/evaluation`)**

- **Admin** : Gestion complÃ¨te des entreprises, grilles de qualitÃ©, pondÃ©ration
- **Four Zones** : MÃ©thodologie d'Ã©valuation en 4 zones avec IA
- **Post-its** : SystÃ¨me d'annotation collaborative
- **EntraÃ®nement** : Parcours de formation personnalisÃ©s
- **SynthÃ¨se** : Graphiques radar et synthÃ¨ses d'Ã©valuation

### **2. Module Whiteboard (`/whiteboard`)**

- **Coaching Four Zone** : Interface de coaching avec mÃ©thodologie 4 zones
- **Ã‰valuations PartagÃ©es** : Sessions collaboratives temps rÃ©el
- **Upload Audio** : Gestion complÃ¨te des fichiers audio
- **Transcriptions** : Affichage synchronisÃ© des transcriptions

### **3. Module Zoho WorkDrive (`/zohoworkdrive`)**

- **Explorateur de fichiers** : Interface de navigation Zoho
- **Upload/Download** : Gestion des fichiers cloud
- **Authentification OAuth** : IntÃ©gration sÃ©curisÃ©e

## ðŸš€ Installation et Configuration

### PrÃ©requis

- Node.js 18+
- Supabase (base de donnÃ©es)
- Compte Zoho WorkDrive
- ClÃ©s API IA (transcription, TTS)

### Installation

```bash
# Cloner le repository
git clone https://github.com/Sainthilaire-thomas/whiteboard.git
cd whiteboard

# Installer les dÃ©pendances
npm install

# Configuration environnement
cp .env.example .env.local
# Configurer les variables Zoho, Supabase, IA

# DÃ©marrer en dÃ©veloppement
npm run dev
```

### Variables d'Environnement Principales

```bash
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_key

# Zoho WorkDrive
ZOHO_CLIENT_ID=your_zoho_client_id
ZOHO_CLIENT_SECRET=your_zoho_client_secret
ZOHO_REDIRECT_URI=your_redirect_uri

# IA Services
TRANSCRIPTION_API_KEY=your_transcription_key
TTS_API_KEY=your_tts_key

# Application
NEXTAUTH_SECRET=your_secret_key
NEXTAUTH_URL=http://localhost:3000
```

## ðŸ“š Utilisation

### **Ã‰valuation d'Appels**

1. **Upload audio** via Zoho WorkDrive ou upload direct
2. **Transcription automatique** avec IA
3. **Ã‰valuation Four Zones** collaborative
4. **Post-its et annotations** en temps rÃ©el
5. **SynthÃ¨se et rapport** automatique

### **Formation et Coaching**

1. **SÃ©lection conseiller/entreprise**
2. **Parcours d'entraÃ®nement** personnalisÃ©
3. **Ressources et fiches** coach/conseiller
4. **Suivi progression** temps rÃ©el

### **Administration**

1. **Gestion entreprises** et utilisateurs
2. **Configuration grilles qualitÃ©**
3. **PondÃ©ration sujets** d'Ã©valuation
4. **Statistiques et rapports**

## ðŸš€ DÃ©ploiements

### Environnements Actifs

- **Production** : `whiteboard-uiyt` âœ… (dÃ©ployÃ© hier)
- **Staging** : `whiteboard` âœ… (dÃ©ployÃ© hier)
- **DÃ©veloppement** : `whiteboard-ie6i` âœ… (dÃ©ployÃ© hier)

**Total : 42 dÃ©ploiements** avec pipeline CI/CD automatisÃ© (Vercel + Netlify)

## ðŸ§  **Logique MÃ©tier et Concepts ClÃ©s**

### **MÃ©thodologie "Four Zones"**

La mÃ©thodologie Four Zones est au cÅ“ur de l'application et permet de rejouer le passage :

- **Zone 1** : Refleter ce qu'a fait le client
- **Zone 2** : DÃ©crire ce que je fais
- **Zone 3** : DÃ©crire ce que fait l'entreprise
- **Zone 4** : DÃ©crire ce que fera le client

**Workflow** : Upload audio â†’ Transcription IA â†’ Analyse Four Zones â†’ Post-its collaboratifs â†’ SynthÃ¨se finale

### **SystÃ¨me d'Ã‰valuation**

- **Grilles de qualitÃ©** personnalisables par entreprise
- **PondÃ©ration dynamique** des sujets d'Ã©valuation
- **Sessions partagÃ©es** : Ã‰valuateur + Spectateurs en temps rÃ©el
- **Post-its colorÃ©s** par zone avec suggestions IA
- **Radar d'Ã©valuation** automatique

### **Workflow Complet**

```
1. SÃ©lection Entreprise/Conseiller â†’
2. Upload Audio (Zoho/Direct) â†’
3. Transcription IA automatique â†’
4. Ã‰valuation Four Zones collaborative â†’
5. Post-its et amÃ©liorations IA â†’
6. SynthÃ¨se et rapport final â†’
7. Envoi email formation
```

## ðŸ”§ **Hooks et Services SpÃ©cialisÃ©s**

### **Hooks MÃ©tier Critiques**

```typescript
// Synchronisation Ã©valuation temps rÃ©el
useRealtimeEvaluationSharing(); // Sessions collaboratives
useRealtimeEvaluationSync(); // Sync donnÃ©es Ã©valuation
useSharedEvaluation(); // Partage multi-utilisateurs
useSpectatorTranscriptions(); // Transcriptions pour spectateurs

// Navigation phases d'activitÃ©
useActivityPhases(); // Gestion phases mÃ©tier
useActivityStats(); // Statistiques activitÃ©
usePhaseNavigation(); // Navigation entre phases
usePhaseData(); // DonnÃ©es par phase

// Post-its et annotations
usePostit(); // CRUD post-its
usePostitActions(); // Actions post-its (crÃ©er, modifier, supprimer)
usePostitNavigation(); // Navigation entre post-its
useDragAndDrop(); // Drag & drop post-its entre zones

// IA et TTS
useTTS(); // Text-to-Speech avec contrÃ´les prosodiques
useNotifications(); // Notifications systÃ¨me
```

### **Services Backend ClÃ©s**

```typescript
// Services admin
adminDataService.tsx; // CRUD donnÃ©es admin
validationService.tsx; // Validation formulaires

// Utilitaires mÃ©tier
audioUploadUtils.tsx; // Upload et traitement audio
supabaseUtils.tsx; // Interface Supabase
WorkDriveUtils.tsx; // Interface Zoho WorkDrive
aiUtils.tsx; // IntÃ©gration IA (transcription, amÃ©lioration)
generateFinalText.tsx; // GÃ©nÃ©ration texte final Ã©valuation
rolePlayUtils.tsx; // Simulation conversations
```

## ðŸŽ¯ **Ã‰tats et Flux de DonnÃ©es**

### **Ã‰tats Globaux Critiques**

- **Sessions d'Ã©valuation** : Ã‰tat partagÃ© temps rÃ©el
- **Position timeline** : Synchronisation lecture audio
- **Mode Ã©valuation** : Ã‰valuateur vs Spectateur
- **ContrÃ´les interface** : Play/pause, vitesse lecture
- **Cache Zoho** : Tokens OAuth et fichiers

### **Flux Temps RÃ©el**

```typescript
// WebSocket/Temps rÃ©el via Supabase
Session Creation â†’ Real-time Sync â†’
Position Updates â†’ Control Sync â†’
Postit Changes â†’ Final Evaluation
```

## ðŸ“Š **Structure des DonnÃ©es**

### **EntitÃ©s Principales**

```typescript
// Entreprises et utilisateurs
Enterprise {
  id, name, grilles_qualite[],
  conseillers[], domaines[]
}

// Appels et Ã©valuations
Call {
  id, audio_url, transcript,
  entreprise_id, conseiller_id,
  four_zones_data, postits[]
}

// Sessions collaboratives
EvaluationSession {
  id, call_id, evaluator_id,
  spectators[], controls, mode,
  timeline_position, status
}

// Grilles de qualitÃ©
QualityGrid {
  id, entreprise_id, categories[],
  sujets[], ponderation_rules
}
```

## ðŸš¨ **Points d'Attention Techniques**

### **Gestion des Erreurs SpÃ©cifiques**

- **Erreurs Zoho OAuth** : Refresh tokens expirÃ©s
- **Timeouts transcription** : Fichiers audio longs
- **Sync temps rÃ©el** : Perte connexion pendant Ã©valuation
- **Upload failures** : Fichiers audio corrompus/trop lourds
- **TTS limitations** : Limites API et quotas

### **Performance Critiques**

- **Transcription streaming** : Affichage progressif
- **Audio loading** : PrÃ©chargement et cache
- **Real-time sync** : Debouncing des mises Ã  jour
- **Zoho API** : Rate limiting et pagination
- **Large files** : Upload chunking

### **SÃ©curitÃ© et ConformitÃ©**

- **RGPD** : Anonymisation donnÃ©es audio
- **OAuth Zoho** : Gestion tokens sÃ©curisÃ©e
- **Sessions** : Timeout automatique
- **Data retention** : Politique de rÃ©tention audio
- **Access control** : Permissions par entreprise

## ðŸ”„ **IntÃ©grations Externes**

### **APIs Tierces**

```typescript
// Zoho WorkDrive
- OAuth 2.0 flow complet
- Upload/Download fichiers
- Gestion dossiers entreprise
- Webhooks synchronisation

// Services IA
- Transcription speech-to-text
- Text-to-Speech avec voix personnalisÃ©es
- AmÃ©lioration texte par IA
- Analyse sentiments (probable)

// Supabase Real-time
- WebSocket subscriptions
- Row Level Security (RLS)
- Storage fichiers audio
- Database triggers
```

### **Webhooks et Events**

- **Zoho callbacks** : Synchronisation fichiers
- **Supabase triggers** : Notifications temps rÃ©el
- **Audio processing** : Events transcription
- **Email automation** : Envoi formations

## ðŸ“‹ **Conventions et Standards**

### **Naming Conventions**

```typescript
// Composants
PascalCase: EvaluationCard, FourZoneNode
Suffixes: ...Modal, ...Dialog, ...Panel, ...Form

// Hooks
camelCase: useRealtimeEvaluationSync
Prefixes: use...

// Types
PascalCase: EvaluationSession, QualityGrid
Suffixes: ...Types, ...Data, ...Config

// Utils
camelCase: audioUploadUtils, generateFinalText
```

### **Architecture Patterns**

- **Compound Components** : ActivitySidebar avec sous-composants
- **Custom Hooks** : Logique mÃ©tier isolÃ©e
- **Service Layer** : SÃ©paration API/UI
- **Type-first** : Types dÃ©finis avant implÃ©mentation

## ðŸŽ“ **Domaine MÃ©tier - Formation & Ã‰valuation**

### **Vocabulaire SpÃ©cialisÃ©**

- **Conseiller** : Agent Ã©valuÃ©
- **Coach** : Ã‰valuateur/Formateur
- **Spectateur** : Observateur session
- **Pratique** : CompÃ©tence Ã©valuÃ©e
- **Sujet** : ThÃ¨me d'Ã©valuation
- **PondÃ©ration** : Poids dans notation finale
- **Grille qualitÃ©** : RÃ©fÃ©rentiel Ã©valuation

### **MÃ©triques et KPIs**

- **Score global** : Note finale pondÃ©rÃ©e
- **Progression** : Ã‰volution dans le temps
- **Zones faibles** : Axes d'amÃ©lioration
- **ConformitÃ©** : Respect grille qualitÃ©

## ðŸ“„ Notes pour Claude

### Contexte Technique RÃ©el

Cette plateforme est un **systÃ¨me d'Ã©valuation et de formation avancÃ©** pour centres d'appels avec :

- **IA intÃ©grÃ©e** : Transcription, TTS, amÃ©lioration de texte
- **MÃ©thodologie Four Zones** : Approche structurÃ©e d'Ã©valuation
- **Collaboration temps rÃ©el** : Sessions partagÃ©es multi-utilisateurs
- **IntÃ©gration enterprise** : Zoho WorkDrive, Supabase
- **Administration complÃ¨te** : Gestion entreprises, grilles, pondÃ©ration

### Patterns Architecturaux UtilisÃ©s

- **Module-first architecture** : Chaque fonctionnalitÃ© = module complet
- **Hook-driven logic** : Logique mÃ©tier dans hooks personnalisÃ©s
- **Real-time first** : Collaboration temps rÃ©el partout
- **Type-safe** : TypeScript strict sur toute l'application
- **Service layer** : SÃ©paration claire API/UI/logique mÃ©tier

### Questions FrÃ©quentes pour Assistance

#### **ðŸŽ¯ Ã‰valuation et Four Zones**

```typescript
// Comment fonctionne la mÃ©thodologie Four Zones ?
1. Upload audio â†’ 2. Transcription IA â†’ 3. Analyse par zones â†’
4. Post-its collaboratifs â†’ 5. SynthÃ¨se finale

// OÃ¹ se trouve la logique des zones ?
app/evaluation/components/FourZones/
app/whiteboard/components/CoachingFourZone/
```

#### **ðŸ”„ Temps RÃ©el et Sessions**

```typescript
// Comment fonctionnent les sessions partagÃ©es ?
useRealtimeEvaluationSharing() // Hook principal
api/evaluation-sharing/* // APIs backend
Supabase WebSocket subscriptions // Infrastructure

// Synchronisation timeline audio
useSpectatorTranscriptions() // Sync transcriptions
update-position API // Position partagÃ©e
```

#### **ðŸ¤– IA et Transcription**

```typescript
// Pipeline de transcription
api/transcribe â†’ api/transcription/get â†’
Affichage temps rÃ©el â†’ AmÃ©lioration IA (api/ai/improve)

// Text-to-Speech
api/tts â†’ useTTS() hook â†’ ContrÃ´les prosodiques
```

#### **â˜ï¸ IntÃ©gration Zoho**

```typescript
// OAuth Flow
api/zoho/auth â†’ api/zoho/callback â†’
Stockage tokens â†’ api/zoho/workdrive

// Upload/Download
WorkDriveUtils.tsx // Utilitaires
audioUploadUtils.tsx // Traitement audio
```

#### **ðŸ‘¥ Administration Multi-Niveaux**

```typescript
// HiÃ©rarchie
Entreprises â†’ Grilles qualitÃ© â†’ CatÃ©gories â†’
Sujets â†’ PondÃ©ration â†’ Conseillers

// Interface admin
app/evaluation/admin/ // Module complet
adminDataService.tsx // CRUD donnÃ©es
```

### Debugging et Troubleshooting

#### **ðŸš¨ Erreurs Communes**

```typescript
// Session temps rÃ©el perdue
â†’ VÃ©rifier useRealtimeEvaluationSharing()
â†’ ContrÃ´ler connexion Supabase WebSocket

// Transcription Ã©choue
â†’ VÃ©rifier api/transcribe
â†’ ContrÃ´ler format/taille fichier audio

// Upload Zoho fail
â†’ VÃ©rifier tokens OAuth (api/zoho/auth)
â†’ ContrÃ´ler permissions WorkDrive

// TTS ne fonctionne pas
â†’ VÃ©rifier api/tts
â†’ ContrÃ´ler quotas API externes
```

#### **ðŸ” Logs et Monitoring**

```typescript
// Fichiers de logs
erreurs_groupees.txt // Erreurs centralisÃ©es
console.log dans hooks // Debug temps rÃ©el
Supabase dashboard // Monitoring real-time

// Points de contrÃ´le
- Position timeline partagÃ©e
- Ã‰tat sessions actives
- Cache Zoho tokens
- Queue transcription
```

### Recommandations DÃ©veloppement

#### **ðŸ—ï¸ Ajout Nouvelles FonctionnalitÃ©s**

1. **Identifier le module** : Ã‰valuation/Whiteboard/Zoho
2. **CrÃ©er hook spÃ©cialisÃ©** : useNewFeature()
3. **Ajouter API route** : app/api/new-feature/
4. **Types TypeScript** : DÃ©finir interfaces
5. **Composants** : Suivre pattern existant
6. **Tests temps rÃ©el** : VÃ©rifier sync multi-users

#### **ðŸŽ¨ UI/UX Patterns**

```typescript
// Structure composants
Feature/
â”œâ”€â”€ index.tsx          // Point d'entrÃ©e
â”œâ”€â”€ components/        // Sous-composants
â”œâ”€â”€ hooks/            // Logique mÃ©tier
â”œâ”€â”€ types/            // Types TypeScript
â””â”€â”€ utils/            // Utilitaires

// Hooks pattern
const useFeature = () => {
  const [state, setState] = useState()
  const actions = useMemo(() => ({ ... }), [])
  return { state, actions, loading, error }
}
```

#### **ðŸ”’ SÃ©curitÃ© et Permissions**

- **Row Level Security** Supabase par entreprise
- **OAuth tokens** stockage sÃ©curisÃ©
- **Anonymisation** donnÃ©es sensibles
- **Timeout sessions** Ã©valuation
- **Validation** inputs utilisateur

### Ressources et Documentation

#### **ðŸ“š Docs Internes**

```
app/whiteboard/README*.MD // Documentation phases
app/evaluation/admin/README.md // Guide admin
SUPABASE.MD // Configuration base de donnÃ©es
```

#### **ðŸ”— APIs Externes**

- **Zoho WorkDrive API** : Gestion fichiers
- **Services transcription** : Speech-to-text
- **APIs TTS** : Text-to-speech
- **Supabase Real-time** : WebSocket sync
